<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Recuperación</title>
  <!-- CSS -->
  <link href="https://framework-gb.cdn.gob.mx/favicon.ico" rel="shortcut icon">
  <link href="https://framework-gb.cdn.gob.mx/assets/styles/main.css" rel="stylesheet">
  <style>
    .logs-form {
      padding: 60px;
      margin: 40px 0 70px;
      border: 1px solid #eee;
      border-radius: 4px;
      background-color: #f5f5f5;
    }
  
    .more-links {
      margin-top: 20px;
    }
  
    .more-links>a {
      display: block;
      margin: 5px 0;
    }
  
    /*
      ** Validatons
      ** -------------------------
      */
  
    .invalid-text {
      color: #f3093b;
    }
  
    .is-invalid {
      border-color: #f3093b;
    }
  
    .is-invalid:focus {
      border-color: #f3093b;
      outline: 0;
      box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 8px rgba(194, 4, 4, 0.6);
    }
  </style>

  <!-- Respond.js soporte de media queries para Internet Explorer 8 -->
  <!-- ie8.js EventTarget para cada nodo en Internet Explorer 8 -->
  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/ie8/0.2.2/ie8.js"></script>
    <![endif]-->

</head>

<body>

  <!-- Contenido -->
  <main class="page">
    <div class="container">
      <div class="row">
        <div class="col-md-6 col-md-offset-3">
          <h1>Recuperación de contraseña</h1>
          <form action="/request-password-reset" method="post" class="logs-form">
            <div class="form-group">
              <label for="reset-email">Correo electrónico:</label>
              <input type="email" class="form-control" name="email" id="reset-email" placeholder="Ingresa tu correo electrónico">
            </div>
            <button type="submit" class="btn btn-primary btn-block">Recuperar contraseña</button>
            <div class="form-group more-links">
              <a href="/registro">Crear cuenta</a>
            </div>
          </form>
        </div>
      </div>
    </div>
  </main>

  <!-- JS -->
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script src="https://framework-gb.cdn.gob.mx/gobmx.js"></script>
  <script>
    (function () {
      var app = {
        init: function () {
          app.interactions();
        },

        interactions: function () {
          app.validate_login();
        },

        validate_login: function () {
          var $email = $('#reset-email');
          var $submit = $('button[type="submit"]');

          // Se valida el email al refrescarse la web
          if (app.validate_email($email.val())) {
            $submit.attr('disabled', false);
          } else {
            $submit.attr('disabled', true);
          }

          // Valida el email cada que se presiona una tecla
          $email.keyup(function () {
            $('.invalid-text').remove();

            if (app.validate_email($email.val())) {
              $email.removeClass('is-invalid');
              $submit.attr('disabled', false);
            } else {
              $email.addClass('is-invalid');
              $email.parent().append('<small class="invalid-text">Por favor ingresa un correo electrónico válido</small>');
              $submit.attr('disabled', true);
            }
          });
        },

        validate_email: function (email) {
          var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
          return re.test(String(email).toLowerCase());
        }
      };

      $(document).ready(app.init);
    })();
  </script>

</body>

</html>